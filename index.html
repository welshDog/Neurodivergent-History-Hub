<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neurodivergent History - Celebrating Different Minds Through Time</title>
    <meta name="description" content="Explore the remarkable contributions of neurodivergent individuals throughout history. An accessible, inclusive platform celebrating different minds.">
    
    <style>
        /* Perplexity Design System */
        :root {
          /* Primitive Color Tokens */
          --color-white: rgba(255, 255, 255, 1);
          --color-black: rgba(0, 0, 0, 1);
          --color-cream-50: rgba(252, 252, 249, 1);
          --color-cream-100: rgba(255, 255, 253, 1);
          --color-gray-200: rgba(245, 245, 245, 1);
          --color-gray-300: rgba(167, 169, 169, 1);
          --color-gray-400: rgba(119, 124, 124, 1);
          --color-slate-500: rgba(98, 108, 113, 1);
          --color-brown-600: rgba(94, 82, 64, 1);
          --color-charcoal-700: rgba(31, 33, 33, 1);
          --color-charcoal-800: rgba(38, 40, 40, 1);
          --color-slate-900: rgba(19, 52, 59, 1);
          --color-teal-300: rgba(50, 184, 198, 1);
          --color-teal-400: rgba(45, 166, 178, 1);
          --color-teal-500: rgba(33, 128, 141, 1);
          --color-teal-600: rgba(29, 116, 128, 1);
          --color-teal-700: rgba(26, 104, 115, 1);
          --color-teal-800: rgba(41, 150, 161, 1);
          --color-red-400: rgba(255, 84, 89, 1);
          --color-red-500: rgba(192, 21, 47, 1);
          --color-orange-400: rgba(230, 129, 97, 1);
          --color-orange-500: rgba(168, 75, 47, 1);

          /* RGB versions for opacity control */
          --color-brown-600-rgb: 94, 82, 64;
          --color-teal-500-rgb: 33, 128, 141;
          --color-slate-900-rgb: 19, 52, 59;
          --color-slate-500-rgb: 98, 108, 113;
          --color-red-500-rgb: 192, 21, 47;
          --color-red-400-rgb: 255, 84, 89;
          --color-orange-500-rgb: 168, 75, 47;
          --color-orange-400-rgb: 230, 129, 97;

          /* Background color tokens (Light Mode) */
          --color-bg-1: rgba(59, 130, 246, 0.08);
          --color-bg-2: rgba(245, 158, 11, 0.08);
          --color-bg-3: rgba(34, 197, 94, 0.08);
          --color-bg-4: rgba(239, 68, 68, 0.08);
          --color-bg-5: rgba(147, 51, 234, 0.08);
          --color-bg-6: rgba(249, 115, 22, 0.08);
          --color-bg-7: rgba(236, 72, 153, 0.08);
          --color-bg-8: rgba(6, 182, 212, 0.08);

          /* Semantic Color Tokens (Light Mode) */
          --color-background: var(--color-cream-50);
          --color-surface: var(--color-cream-100);
          --color-text: var(--color-slate-900);
          --color-text-secondary: var(--color-slate-500);
          --color-primary: var(--color-teal-500);
          --color-primary-hover: var(--color-teal-600);
          --color-primary-active: var(--color-teal-700);
          --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
          --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
          --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
          --color-border: rgba(var(--color-brown-600-rgb), 0.2);
          --color-btn-primary-text: var(--color-cream-50);
          --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
          --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
          --color-error: var(--color-red-500);
          --color-success: var(--color-teal-500);
          --color-warning: var(--color-orange-500);
          --color-info: var(--color-slate-500);
          --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
          --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

          /* Common style patterns */
          --focus-ring: 0 0 0 3px var(--color-focus-ring);
          --focus-outline: 2px solid var(--color-primary);
          --status-bg-opacity: 0.15;
          --status-border-opacity: 0.25;

          /* RGB versions for opacity control */
          --color-success-rgb: 33, 128, 141;
          --color-error-rgb: 192, 21, 47;
          --color-warning-rgb: 168, 75, 47;
          --color-info-rgb: 98, 108, 113;

          /* Typography */
          --font-family-base: "Segoe UI", "SF Pro Text", -apple-system, BlinkMacSystemFont, Roboto, sans-serif;
          --font-family-dyslexic: "OpenDyslexic", "Comic Sans MS", cursive;
          --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
          --font-size-xs: 11px;
          --font-size-sm: 12px;
          --font-size-base: 14px;
          --font-size-md: 14px;
          --font-size-lg: 16px;
          --font-size-xl: 18px;
          --font-size-2xl: 20px;
          --font-size-3xl: 24px;
          --font-size-4xl: 30px;
          --font-weight-normal: 400;
          --font-weight-medium: 500;
          --font-weight-semibold: 550;
          --font-weight-bold: 600;
          --line-height-tight: 1.2;
          --line-height-normal: 1.5;
          --letter-spacing-tight: -0.01em;

          /* Spacing */
          --space-0: 0;
          --space-1: 1px;
          --space-2: 2px;
          --space-4: 4px;
          --space-6: 6px;
          --space-8: 8px;
          --space-10: 10px;
          --space-12: 12px;
          --space-16: 16px;
          --space-20: 20px;
          --space-24: 24px;
          --space-32: 32px;

          /* Border Radius */
          --radius-sm: 6px;
          --radius-base: 8px;
          --radius-md: 10px;
          --radius-lg: 12px;
          --radius-full: 9999px;

          /* Shadows */
          --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
          --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
          --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
          --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
          --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

          /* Animation */
          --duration-fast: 150ms;
          --duration-normal: 250ms;
          --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* Dark mode colors */
        @media (prefers-color-scheme: dark) {
          :root {
            --color-gray-400-rgb: 119, 124, 124;
            --color-teal-300-rgb: 50, 184, 198;
            --color-gray-300-rgb: 167, 169, 169;
            --color-gray-200-rgb: 245, 245, 245;

            --color-bg-1: rgba(29, 78, 216, 0.15);
            --color-bg-2: rgba(180, 83, 9, 0.15);
            --color-bg-3: rgba(21, 128, 61, 0.15);
            --color-bg-4: rgba(185, 28, 28, 0.15);
            --color-bg-5: rgba(107, 33, 168, 0.15);
            --color-bg-6: rgba(194, 65, 12, 0.15);
            --color-bg-7: rgba(190, 24, 93, 0.15);
            --color-bg-8: rgba(8, 145, 178, 0.15);

            --color-background: var(--color-charcoal-700);
            --color-surface: var(--color-charcoal-800);
            --color-text: var(--color-gray-200);
            --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
            --color-primary: var(--color-teal-300);
            --color-primary-hover: var(--color-teal-400);
            --color-primary-active: var(--color-teal-800);
            --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
            --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
            --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
            --color-border: rgba(var(--color-gray-400-rgb), 0.3);
            --color-error: var(--color-red-400);
            --color-success: var(--color-teal-300);
            --color-warning: var(--color-orange-400);
            --color-info: var(--color-gray-300);
            --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
            --color-btn-primary-text: var(--color-slate-900);
            --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
            --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
            --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

            --color-success-rgb: var(--color-teal-300-rgb);
            --color-error-rgb: var(--color-red-400-rgb);
            --color-warning-rgb: var(--color-orange-400-rgb);
            --color-info-rgb: var(--color-gray-300-rgb);
          }
        }

        /* Theme overrides */
        .theme-light {
          --color-background: var(--color-cream-50);
          --color-surface: var(--color-cream-100);
          --color-text: var(--color-slate-900);
          --color-text-secondary: var(--color-slate-500);
          --color-primary: var(--color-teal-500);
          --color-primary-hover: var(--color-teal-600);
          --color-btn-primary-text: var(--color-cream-50);
        }

        .theme-dark {
          --color-background: var(--color-charcoal-700);
          --color-surface: var(--color-charcoal-800);
          --color-text: var(--color-gray-200);
          --color-text-secondary: rgba(167, 169, 169, 0.7);
          --color-primary: var(--color-teal-300);
          --color-primary-hover: var(--color-teal-400);
          --color-btn-primary-text: var(--color-slate-900);
        }

        .theme-high-contrast {
          --color-background: var(--color-white);
          --color-surface: var(--color-white);
          --color-text: var(--color-black);
          --color-text-secondary: var(--color-black);
          --color-primary: var(--color-black);
          --color-primary-hover: rgba(0, 0, 0, 0.8);
          --color-btn-primary-text: var(--color-white);
          --color-border: var(--color-black);
          --color-card-border: var(--color-black);
        }

        .theme-neurodivergent {
          --color-background: rgba(240, 248, 255, 1);
          --color-surface: rgba(248, 250, 252, 1);
          --color-text: rgba(30, 41, 59, 1);
          --color-text-secondary: rgba(71, 85, 105, 1);
          --color-primary: rgba(59, 130, 246, 1);
          --color-primary-hover: rgba(37, 99, 235, 1);
          --color-btn-primary-text: var(--color-white);
        }

        .font-dyslexic {
          font-family: var(--font-family-dyslexic) !important;
        }

        .text-small {
          font-size: var(--font-size-sm);
        }

        .text-medium {
          font-size: var(--font-size-base);
        }

        .text-large {
          font-size: var(--font-size-lg);
        }

        .text-extra-large {
          font-size: var(--font-size-xl);
        }

        .distraction-free {
          --color-bg-1: transparent;
          --color-bg-2: transparent;
          --color-bg-3: transparent;
          --color-bg-4: transparent;
          --color-bg-5: transparent;
          --color-bg-6: transparent;
          --color-bg-7: transparent;
          --color-bg-8: transparent;
        }

        .distraction-free .decorative {
          display: none !important;
        }

        /* Base styles */
        html {
          font-size: var(--font-size-base);
          font-family: var(--font-family-base);
          line-height: var(--line-height-normal);
          color: var(--color-text);
          background-color: var(--color-background);
          -webkit-font-smoothing: antialiased;
          box-sizing: border-box;
          scroll-behavior: smooth;
        }

        body {
          margin: 0;
          padding: 0;
          min-height: 100vh;
        }

        *, *::before, *::after {
          box-sizing: inherit;
        }

        /* Skip links */
        .skip-link {
          position: absolute;
          top: -40px;
          left: 6px;
          background: var(--color-primary);
          color: var(--color-btn-primary-text);
          padding: 8px;
          text-decoration: none;
          border-radius: 4px;
          z-index: 1000;
          transition: top 0.3s;
        }

        .skip-link:focus {
          top: 6px;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
          margin: 0;
          font-weight: var(--font-weight-semibold);
          line-height: var(--line-height-tight);
          color: var(--color-text);
          letter-spacing: var(--letter-spacing-tight);
        }

        h1 { font-size: var(--font-size-4xl); }
        h2 { font-size: var(--font-size-3xl); }
        h3 { font-size: var(--font-size-2xl); }
        h4 { font-size: var(--font-size-xl); }
        h5 { font-size: var(--font-size-lg); }
        h6 { font-size: var(--font-size-md); }

        p {
          margin: 0 0 var(--space-16) 0;
          line-height: var(--line-height-normal);
        }

        /* Buttons */
        .btn {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: var(--space-8) var(--space-16);
          border-radius: var(--radius-base);
          font-size: var(--font-size-base);
          font-weight: 500;
          line-height: 1.5;
          cursor: pointer;
          transition: all var(--duration-normal) var(--ease-standard);
          border: none;
          text-decoration: none;
          position: relative;
          white-space: nowrap;
        }

        .btn:focus-visible {
          outline: none;
          box-shadow: var(--focus-ring);
        }

        .btn--primary {
          background: var(--color-primary);
          color: var(--color-btn-primary-text);
        }

        .btn--primary:hover {
          background: var(--color-primary-hover);
        }

        .btn--secondary {
          background: var(--color-secondary);
          color: var(--color-text);
        }

        .btn--secondary:hover {
          background: var(--color-secondary-hover);
        }

        .btn--outline {
          background: transparent;
          border: 1px solid var(--color-border);
          color: var(--color-text);
        }

        .btn--outline:hover {
          background: var(--color-secondary);
        }

        .btn--sm {
          padding: var(--space-4) var(--space-12);
          font-size: var(--font-size-sm);
        }

        /* Form elements */
        .form-control {
          display: block;
          width: 100%;
          padding: var(--space-8) var(--space-12);
          font-size: var(--font-size-md);
          line-height: 1.5;
          color: var(--color-text);
          background-color: var(--color-surface);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-base);
          transition: border-color var(--duration-fast) var(--ease-standard);
        }

        .form-control:focus {
          border-color: var(--color-primary);
          outline: var(--focus-outline);
        }

        select.form-control {
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
          background-repeat: no-repeat;
          background-position: right var(--space-12) center;
          background-size: 16px;
          padding-right: var(--space-32);
        }

        /* Cards */
        .card {
          background-color: var(--color-surface);
          border-radius: var(--radius-lg);
          border: 1px solid var(--color-card-border);
          box-shadow: var(--shadow-sm);
          overflow: hidden;
          transition: all var(--duration-normal) var(--ease-standard);
        }

        .card:hover {
          box-shadow: var(--shadow-md);
          transform: translateY(-2px);
        }

        .card__body {
          padding: var(--space-16);
        }

        /* Layout utilities */
        .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 var(--space-16);
        }

        .flex {
          display: flex;
        }

        .flex-col {
          flex-direction: column;
        }

        .items-center {
          align-items: center;
        }

        .justify-center {
          justify-content: center;
        }

        .justify-between {
          justify-content: space-between;
        }

        .gap-4 {
          gap: var(--space-4);
        }

        .gap-8 {
          gap: var(--space-8);
        }

        .gap-16 {
          gap: var(--space-16);
        }

        .gap-24 {
          gap: var(--space-24);
        }

        .grid {
          display: grid;
        }

        .grid-cols-1 {
          grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        .grid-cols-2 {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .grid-cols-3 {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }

        .hidden {
          display: none;
        }

        .sr-only {
          position: absolute;
          width: 1px;
          height: 1px;
          padding: 0;
          margin: -1px;
          overflow: hidden;
          clip: rect(0, 0, 0, 0);
          white-space: nowrap;
          border-width: 0;
        }

        /* Accessibility panel */
        .accessibility-panel {
          background: var(--color-surface);
          border-bottom: 1px solid var(--color-border);
          padding: var(--space-16);
          position: sticky;
          top: 0;
          z-index: 100;
        }

        .accessibility-controls {
          display: flex;
          flex-wrap: wrap;
          gap: var(--space-16);
          align-items: center;
        }

        .control-group {
          display: flex;
          flex-direction: column;
          gap: var(--space-4);
        }

        .control-group label {
          font-size: var(--font-size-sm);
          font-weight: var(--font-weight-medium);
          color: var(--color-text-secondary);
        }

        /* Navigation */
        .nav-cards {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: var(--space-24);
          margin: var(--space-32) 0;
        }

        .nav-card {
          padding: var(--space-24);
          text-align: center;
          cursor: pointer;
          background: var(--color-bg-1);
        }

        .nav-card:nth-child(2) {
          background: var(--color-bg-2);
        }

        .nav-card:nth-child(3) {
          background: var(--color-bg-3);
        }

        .nav-card h3 {
          margin-bottom: var(--space-8);
        }

        /* Timeline styles */
        .timeline {
          position: relative;
          padding: var(--space-32) 0;
        }

        .timeline-item {
          display: flex;
          gap: var(--space-16);
          margin-bottom: var(--space-24);
          padding: var(--space-16);
          background: var(--color-surface);
          border-radius: var(--radius-lg);
          border: 1px solid var(--color-card-border);
          cursor: pointer;
          transition: all var(--duration-normal);
        }

        .timeline-item:hover {
          box-shadow: var(--shadow-md);
        }

        .timeline-year {
          font-weight: var(--font-weight-bold);
          color: var(--color-primary);
          min-width: 80px;
        }

        .timeline-content h4 {
          margin-bottom: var(--space-4);
        }

        /* Figure cards */
        .figures-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--space-24);
          margin-top: var(--space-24);
        }

        .figure-card {
          text-align: center;
          cursor: pointer;
        }

        .figure-avatar {
          width: 120px;
          height: 120px;
          border-radius: 50%;
          background: var(--color-bg-5);
          margin: 0 auto var(--space-16);
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: var(--font-size-4xl);
        }

        .neurotype-badge {
          display: inline-block;
          padding: var(--space-4) var(--space-8);
          background: var(--color-bg-6);
          border-radius: var(--radius-full);
          font-size: var(--font-size-xs);
          font-weight: var(--font-weight-medium);
          margin: var(--space-8) 0;
        }

        /* Modal */
        .modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          opacity: 0;
          visibility: hidden;
          transition: all var(--duration-normal);
        }

        .modal.active {
          opacity: 1;
          visibility: visible;
        }

        .modal-content {
          background: var(--color-surface);
          border-radius: var(--radius-lg);
          padding: var(--space-24);
          max-width: 600px;
          max-height: 80vh;
          overflow-y: auto;
          margin: var(--space-16);
          position: relative;
        }

        .modal-close {
          position: absolute;
          top: var(--space-16);
          right: var(--space-16);
          background: none;
          border: none;
          font-size: var(--font-size-2xl);
          cursor: pointer;
          color: var(--color-text-secondary);
        }

        /* Community stories */
        .story-card {
          margin-bottom: var(--space-16);
        }

        .story-meta {
          display: flex;
          align-items: center;
          gap: var(--space-8);
          margin-bottom: var(--space-8);
          font-size: var(--font-size-sm);
          color: var(--color-text-secondary);
        }

        /* Progress indicators */
        .progress-bar {
          width: 100%;
          height: 8px;
          background: var(--color-secondary);
          border-radius: var(--radius-full);
          overflow: hidden;
        }

        .progress-fill {
          height: 100%;
          background: var(--color-primary);
          border-radius: var(--radius-full);
          transition: width var(--duration-normal);
        }

        /* Achievement badges */
        .achievement {
          display: flex;
          align-items: center;
          gap: var(--space-8);
          padding: var(--space-8);
          background: var(--color-bg-7);
          border-radius: var(--radius-base);
          margin-bottom: var(--space-8);
        }

        .achievement.unlocked {
          background: var(--color-bg-3);
        }

        .achievement-icon {
          font-size: var(--font-size-2xl);
        }

        .achievement.locked .achievement-icon {
          filter: grayscale(1);
          opacity: 0.5;
        }

        /* Search and filters */
        .filters {
          display: flex;
          flex-wrap: wrap;
          gap: var(--space-8);
          margin-bottom: var(--space-24);
        }

        .filter-btn {
          padding: var(--space-6) var(--space-12);
          border: 1px solid var(--color-border);
          background: transparent;
          border-radius: var(--radius-full);
          font-size: var(--font-size-sm);
          cursor: pointer;
          transition: all var(--duration-fast);
        }

        .filter-btn.active {
          background: var(--color-primary);
          color: var(--color-btn-primary-text);
          border-color: var(--color-primary);
        }

        /* Stats cards */
        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: var(--space-16);
          margin: var(--space-24) 0;
        }

        .stat-card {
          text-align: center;
          padding: var(--space-16);
        }

        .stat-number {
          font-size: var(--font-size-3xl);
          font-weight: var(--font-weight-bold);
          color: var(--color-primary);
        }

        /* Responsive design */
        @media (max-width: 768px) {
          .accessibility-controls {
            flex-direction: column;
            align-items: stretch;
            gap: var(--space-12);
          }

          .control-group {
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
          }

          .nav-cards {
            grid-template-columns: 1fr;
          }

          .figures-grid {
            grid-template-columns: 1fr;
          }

          h1 {
            font-size: var(--font-size-2xl);
          }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
          * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
    </style>
</head>
<body>
    <!-- Skip Navigation Links -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#accessibility-panel" class="skip-link">Skip to accessibility controls</a>

    <!-- Accessibility Panel -->
    <div id="accessibility-panel" class="accessibility-panel" role="region" aria-label="Accessibility Controls">
        <div class="container">
            <h2 class="sr-only">Customize Your Experience</h2>
            <div class="accessibility-controls">
                <div class="control-group">
                    <label for="font-toggle">Font Style</label>
                    <select id="font-toggle" class="form-control" aria-describedby="font-help">
                        <option value="standard">Standard Font</option>
                        <option value="dyslexic">Dyslexia-Friendly Font</option>
                    </select>
                    <div id="font-help" class="sr-only">Choose between standard or dyslexia-friendly font for better readability</div>
                </div>

                <div class="control-group">
                    <label for="text-size">Text Size</label>
                    <select id="text-size" class="form-control" aria-describedby="size-help">
                        <option value="small">Small</option>
                        <option value="medium" selected>Medium</option>
                        <option value="large">Large</option>
                        <option value="extra-large">Extra Large</option>
                    </select>
                    <div id="size-help" class="sr-only">Adjust text size for comfortable reading</div>
                </div>

                <div class="control-group">
                    <label for="theme-selector">Color Theme</label>
                    <select id="theme-selector" class="form-control" aria-describedby="theme-help">
                        <option value="light">Light Mode</option>
                        <option value="dark">Dark Mode</option>
                        <option value="high-contrast">High Contrast</option>
                        <option value="neurodivergent">Neurodivergent Friendly</option>
                    </select>
                    <div id="theme-help" class="sr-only">Choose a color theme that works best for you</div>
                </div>

                <div class="control-group">
                    <label for="distraction-toggle">
                        <input type="checkbox" id="distraction-toggle" aria-describedby="distraction-help">
                        Distraction-Free Mode
                    </label>
                    <div id="distraction-help" class="sr-only">Remove decorative elements for focused reading</div>
                </div>

                <button id="reset-preferences" class="btn btn--outline btn--sm" aria-describedby="reset-help">
                    Reset Preferences
                </button>
                <div id="reset-help" class="sr-only">Reset all accessibility preferences to default values</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Homepage Section -->
        <section id="homepage" class="section active" aria-label="Homepage">
            <div class="container">
                <header style="text-align: center; padding: var(--space-32) 0;">
                    <h1>Celebrating Neurodivergent History üß†‚ú®</h1>
                    <p style="font-size: var(--font-size-xl); margin: var(--space-16) 0; color: var(--color-text-secondary);">Discover the remarkable contributions of different minds throughout history</p>
                    
                    <!-- Quick Stats -->
                    <div class="stats-grid">
                        <div class="stat-card card">
                            <div class="card__body">
                                <div class="stat-number">50+</div>
                                <p>Historical Figures</p>
                            </div>
                        </div>
                        <div class="stat-card card">
                            <div class="card__body">
                                <div class="stat-number">2000+</div>
                                <p>Years of History</p>
                            </div>
                        </div>
                        <div class="stat-card card">
                            <div class="card__body">
                                <div class="stat-number">100%</div>
                                <p>Accessible Design</p>
                            </div>
                        </div>
                    </div>
                </header>

                <!-- Navigation Cards -->
                <nav aria-label="Main sections">
                    <div class="nav-cards">
                        <div class="nav-card card" tabindex="0" role="button" aria-describedby="timeline-desc" onclick="showSection('timeline')" onkeydown="handleCardKeydown(event, 'timeline')">
                            <div class="card__body">
                                <h3>üìÖ Interactive Timeline</h3>
                                <p id="timeline-desc">Journey through history and discover when neurodivergent individuals made their mark on the world.</p>
                                <div class="decorative" style="margin-top: var(--space-16); font-size: var(--font-size-2xl);">‚è∞üìöüöÄ</div>
                            </div>
                        </div>

                        <div class="nav-card card" tabindex="0" role="button" aria-describedby="figures-desc" onclick="showSection('figures')" onkeydown="handleCardKeydown(event, 'figures')">
                            <div class="card__body">
                                <h3>üåü Notable Figures</h3>
                                <p id="figures-desc">Explore the lives and achievements of remarkable neurodivergent individuals who changed the world.</p>
                                <div class="decorative" style="margin-top: var(--space-16); font-size: var(--font-size-2xl);">üß†üí°üé®</div>
                            </div>
                        </div>

                        <div class="nav-card card" tabindex="0" role="button" aria-describedby="stories-desc" onclick="showSection('stories')" onkeydown="handleCardKeydown(event, 'stories')">
                            <div class="card__body">
                                <h3>üí¨ Community Stories</h3>
                                <p id="stories-desc">Share your own experiences and read inspiring stories from the neurodivergent community.</p>
                                <div class="decorative" style="margin-top: var(--space-16); font-size: var(--font-size-2xl);">ü§ùüìñüí™</div>
                            </div>
                        </div>
                    </div>
                </nav>

                <!-- Progress Tracking -->
                <div style="margin-top: var(--space-32);">
                    <h3>Your Learning Journey</h3>
                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Learning progress">
                        <div id="overall-progress" class="progress-fill" style="width: 0%;"></div>
                    </div>
                    <p style="text-align: center; margin-top: var(--space-8); color: var(--color-text-secondary);">Complete activities to unlock achievements!</p>
                </div>

                <!-- Achievements Preview -->
                <div style="margin-top: var(--space-24);">
                    <h3>Achievements</h3>
                    <div id="achievements-preview" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-8);"></div>
                </div>
            </div>
        </section>

        <!-- Timeline Section -->
        <section id="timeline" class="section hidden" aria-label="Interactive Timeline">
            <div class="container">
                <header style="text-align: center; margin-bottom: var(--space-32);">
                    <h1>üìÖ Interactive Timeline</h1>
                    <p>Explore neurodivergent contributions throughout history</p>
                    <button class="btn btn--outline" onclick="showSection('homepage')" aria-label="Return to homepage">
                        ‚Üê Back to Home
                    </button>
                </header>

                <!-- Timeline Filters -->
                <div class="filters" role="group" aria-label="Timeline filters">
                    <button class="filter-btn active" data-filter="all" onclick="filterTimeline('all')">All Events</button>
                    <button class="filter-btn" data-filter="Birth" onclick="filterTimeline('Birth')">Births</button>
                    <button class="filter-btn" data-filter="Achievement" onclick="filterTimeline('Achievement')">Achievements</button>
                    <button class="filter-btn" data-filter="Recognition" onclick="filterTimeline('Recognition')">Recognition</button>
                    <button class="filter-btn" data-filter="Movement" onclick="filterTimeline('Movement')">Movements</button>
                </div>

                <!-- Timeline Content -->
                <div id="timeline-content" class="timeline" role="list"></div>
            </div>
        </section>

        <!-- Notable Figures Section -->
        <section id="figures" class="section hidden" aria-label="Notable Figures">
            <div class="container">
                <header style="text-align: center; margin-bottom: var(--space-32);">
                    <h1>üåü Notable Figures</h1>
                    <p>Discover remarkable neurodivergent individuals who changed the world</p>
                    <button class="btn btn--outline" onclick="showSection('homepage')" aria-label="Return to homepage">
                        ‚Üê Back to Home
                    </button>
                </header>

                <!-- Search -->
                <div style="margin-bottom: var(--space-24);">
                    <label for="figure-search" class="sr-only">Search figures</label>
                    <input type="search" id="figure-search" class="form-control" placeholder="Search figures by name, field, or neurotype..." oninput="searchFigures()" aria-describedby="search-help">
                    <div id="search-help" class="sr-only">Search through historical figures by typing their name, field of work, or neurotype</div>
                </div>

                <!-- Figure Filters -->
                <div class="filters" role="group" aria-label="Figure filters">
                    <button class="filter-btn active" data-filter="all" onclick="filterFigures('all')">All Fields</button>
                    <button class="filter-btn" data-filter="Physics" onclick="filterFigures('Physics')">Physics</button>
                    <button class="filter-btn" data-filter="Art" onclick="filterFigures('Art')">Art</button>
                    <button class="filter-btn" data-filter="Business" onclick="filterFigures('Business')">Business</button>
                    <button class="filter-btn" data-filter="Science" onclick="filterFigures('Science')">Science</button>
                </div>

                <!-- Figures Grid -->
                <div id="figures-grid" class="figures-grid" role="list"></div>
            </div>
        </section>

        <!-- Community Stories Section -->
        <section id="stories" class="section hidden" aria-label="Community Stories">
            <div class="container">
                <header style="text-align: center; margin-bottom: var(--space-32);">
                    <h1>üí¨ Community Stories</h1>
                    <p>Share your experiences and read inspiring stories from our community</p>
                    <button class="btn btn--outline" onclick="showSection('homepage')" aria-label="Return to homepage">
                        ‚Üê Back to Home
                    </button>
                </header>

                <!-- Add Story Form -->
                <div class="card" style="margin-bottom: var(--space-32);">
                    <div class="card__body">
                        <h3>Share Your Story</h3>
                        <form id="story-form" onsubmit="submitStory(event)" aria-labelledby="story-form-heading">
                            <div style="margin-bottom: var(--space-16);">
                                <label for="story-title">Story Title *</label>
                                <input type="text" id="story-title" class="form-control" required aria-describedby="title-help">
                                <div id="title-help" class="sr-only">Give your story a descriptive title</div>
                            </div>

                            <div style="margin-bottom: var(--space-16);">
                                <label for="story-author">Your Name (optional)</label>
                                <input type="text" id="story-author" class="form-control" placeholder="Anonymous">
                            </div>

                            <div style="margin-bottom: var(--space-16);">
                                <label for="story-neurotype">Neurotype (optional)</label>
                                <select id="story-neurotype" class="form-control">
                                    <option value="">Prefer not to specify</option>
                                    <option value="ADHD">ADHD</option>
                                    <option value="Autistic">Autistic</option>
                                    <option value="Dyslexic">Dyslexic</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>

                            <div style="margin-bottom: var(--space-16);">
                                <label for="story-category">Category</label>
                                <select id="story-category" class="form-control">
                                    <option value="Success Story">Success Story</option>
                                    <option value="Inspiration">Inspiration</option>
                                    <option value="Personal Growth">Personal Growth</option>
                                    <option value="Advocacy">Advocacy</option>
                                </select>
                            </div>

                            <div style="margin-bottom: var(--space-16);">
                                <label for="story-content">Your Story *</label>
                                <textarea id="story-content" class="form-control" rows="4" required placeholder="Share your experience, inspiration, or journey..." aria-describedby="content-help"></textarea>
                                <div id="content-help" class="sr-only">Share your story in your own words. Be authentic and inspiring.</div>
                            </div>

                            <button type="submit" class="btn btn--primary">Share Story</button>
                        </form>
                    </div>
                </div>

                <!-- Story Filters -->
                <div class="filters" role="group" aria-label="Story filters">
                    <button class="filter-btn active" data-filter="all" onclick="filterStories('all')">All Stories</button>
                    <button class="filter-btn" data-filter="Success Story" onclick="filterStories('Success Story')">Success</button>
                    <button class="filter-btn" data-filter="Inspiration" onclick="filterStories('Inspiration')">Inspiration</button>
                    <button class="filter-btn" data-filter="Personal Growth" onclick="filterStories('Personal Growth')">Growth</button>
                    <button class="filter-btn" data-filter="Advocacy" onclick="filterStories('Advocacy')">Advocacy</button>
                </div>

                <!-- Stories List -->
                <div id="stories-list" role="list"></div>
            </div>
        </section>
    </main>

    <!-- Figure Detail Modal -->
    <div id="figure-modal" class="modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-content">
            <button class="modal-close" onclick="closeFigureModal()" aria-label="Close modal">&times;</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Success Message -->
    <div id="success-message" class="hidden" style="position: fixed; top: 20px; right: 20px; background: var(--color-success); color: white; padding: var(--space-16); border-radius: var(--radius-base); z-index: 1001;" role="alert" aria-live="polite"></div>

    <script>
        // Application State
        let appState = {
            currentSection: 'homepage',
            preferences: {
                font: 'standard',
                textSize: 'medium',
                theme: 'light',
                distractionFree: false
            },
            progress: {
                figuresViewed: new Set(),
                timelineEventsViewed: new Set(),
                storiesRead: new Set(),
                storySubmitted: false
            },
            achievements: {
                'first-steps': false,
                'time-traveler': false,
                'community-member': false,
                'history-buff': false,
                'accessibility-champion': false
            }
        };

        // Data
        const historicalFigures = [
            {
                name: "Albert Einstein",
                era: "1879-1955",
                neurotype: "Likely Autistic/ADHD",
                field: "Physics",
                achievements: [
                    "Theory of Relativity",
                    "Nobel Prize in Physics (1921)",
                    "E=mc¬≤ equation"
                ],
                description: "Revolutionary physicist who changed our understanding of space and time. Known for his intense focus, unconventional thinking patterns, and difficulty with social conventions.",
                avatar: "üß†"
            },
            {
                name: "Temple Grandin",
                era: "1947-Present",
                neurotype: "Autistic",
                field: "Animal Science & Advocacy",
                achievements: [
                    "Revolutionized livestock handling",
                    "Autism advocacy pioneer",
                    "Author and public speaker"
                ],
                description: "Prominent autism advocate and animal behaviorist who has improved the lives of both animals and autistic individuals worldwide.",
                avatar: "üêÑ"
            },
            {
                name: "Richard Branson",
                era: "1950-Present",
                neurotype: "Dyslexic",
                field: "Business & Entrepreneurship",
                achievements: [
                    "Virgin Group founder",
                    "Space exploration pioneer",
                    "Dyslexia advocacy"
                ],
                description: "Entrepreneur who turned his dyslexia into a business advantage, founding multiple successful companies and advocating for neurodivergent strengths.",
                avatar: "üöÄ"
            },
            {
                name: "Frida Kahlo",
                era: "1907-1954",
                neurotype: "Likely Neurodivergent",
                field: "Art",
                achievements: [
                    "Revolutionary surrealist painter",
                    "150+ paintings and drawings",
                    "Feminist icon"
                ],
                description: "Mexican artist known for her unique perspective, intense focus on her work, and ability to channel personal experiences into transformative art.",
                avatar: "üé®"
            }
        ];

        const timelineEvents = [
            {
                year: "1879",
                event: "Albert Einstein Born",
                description: "The future Nobel laureate showed early signs of different thinking patterns and intense curiosity.",
                category: "Birth"
            },
            {
                year: "1905",
                event: "Einstein's Miracle Year",
                description: "Published five groundbreaking physics papers that changed science forever, demonstrating the power of neurodivergent thinking.",
                category: "Achievement"
            },
            {
                year: "1921",
                event: "Nobel Prize Awarded",
                description: "Einstein receives Nobel Prize in Physics, showing how different minds can achieve extraordinary recognition.",
                category: "Recognition"
            },
            {
                year: "1947",
                event: "Temple Grandin Born",
                description: "Future autism advocate and animal behaviorist begins her journey of changing perceptions about autism.",
                category: "Birth"
            },
            {
                year: "1970",
                event: "Virgin Records Founded",
                description: "Richard Branson starts his first company, demonstrating how dyslexic entrepreneurs can build business empires.",
                category: "Achievement"
            },
            {
                year: "2010",
                event: "Modern Neurodiversity Movement",
                description: "Growing recognition of neurodivergent contributions to society and push for inclusion and acceptance.",
                category: "Movement"
            }
        ];

        let communityStories = [
            {
                title: "My ADHD Helped Me Become a Better Historian",
                author: "Sarah M.",
                content: "My hyperfocus ability allows me to dive deep into historical research for hours, uncovering connections others might miss.",
                neurotype: "ADHD",
                category: "Success Story"
            },
            {
                title: "Temple Grandin Inspired My Career",
                author: "Alex R.",
                content: "Seeing Temple Grandin's success as an autistic scientist showed me that my different way of thinking could be a superpower in research.",
                neurotype: "Autistic",
                category: "Inspiration"
            },
            {
                title: "Dyslexia Made Me a Creative Problem Solver",
                author: "Jordan L.",
                content: "Learning to work around dyslexia taught me to find innovative solutions, just like many successful entrepreneurs throughout history.",
                neurotype: "Dyslexic",
                category: "Personal Growth"
            }
        ];

        const achievements = {
            'first-steps': {
                name: "First Steps",
                description: "Explored your first historical figure",
                icon: "üë∂"
            },
            'time-traveler': {
                name: "Time Traveler",
                description: "Navigated through 5 different historical periods",
                icon: "‚è∞"
            },
            'community-member': {
                name: "Community Member",
                description: "Shared your first story with the community",
                icon: "ü§ù"
            },
            'history-buff': {
                name: "History Buff",
                description: "Read 10 complete historical profiles",
                icon: "üìö"
            },
            'accessibility-champion': {
                name: "Accessibility Champion",
                description: "Customized your experience for optimal learning",
                icon: "‚ôø"
            }
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            renderHomepage();
            setupEventListeners();
        });

        function initializeApp() {
            // Load saved preferences (using variables instead of localStorage due to sandboxing)
            loadPreferences();
            applyPreferences();
            renderAchievements();
            updateProgress();
        }

        function loadPreferences() {
            // In a real app, this would load from localStorage
            // But due to sandboxing, we'll use default values
            const fontToggle = document.getElementById('font-toggle');
            const textSize = document.getElementById('text-size');
            const themeSelector = document.getElementById('theme-selector');
            const distractionToggle = document.getElementById('distraction-toggle');

            fontToggle.value = appState.preferences.font;
            textSize.value = appState.preferences.textSize;
            themeSelector.value = appState.preferences.theme;
            distractionToggle.checked = appState.preferences.distractionFree;
        }

        function applyPreferences() {
            const body = document.body;
            const { font, textSize, theme, distractionFree } = appState.preferences;

            // Reset classes
            body.className = '';

            // Apply font
            if (font === 'dyslexic') {
                body.classList.add('font-dyslexic');
            }

            // Apply text size
            body.classList.add(`text-${textSize}`);

            // Apply theme
            body.classList.add(`theme-${theme}`);

            // Apply distraction-free mode
            if (distractionFree) {
                body.classList.add('distraction-free');
            }
        }

        function setupEventListeners() {
            // Accessibility controls
            document.getElementById('font-toggle').addEventListener('change', function(e) {
                appState.preferences.font = e.target.value;
                applyPreferences();
                checkAccessibilityAchievement();
            });

            document.getElementById('text-size').addEventListener('change', function(e) {
                appState.preferences.textSize = e.target.value;
                applyPreferences();
                checkAccessibilityAchievement();
            });

            document.getElementById('theme-selector').addEventListener('change', function(e) {
                appState.preferences.theme = e.target.value;
                applyPreferences();
                checkAccessibilityAchievement();
            });

            document.getElementById('distraction-toggle').addEventListener('change', function(e) {
                appState.preferences.distractionFree = e.target.checked;
                applyPreferences();
                checkAccessibilityAchievement();
            });

            document.getElementById('reset-preferences').addEventListener('click', function() {
                appState.preferences = {
                    font: 'standard',
                    textSize: 'medium',
                    theme: 'light',
                    distractionFree: false
                };
                loadPreferences();
                applyPreferences();
            });

            // Modal event listeners
            document.getElementById('figure-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeFigureModal();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeFigureModal();
                }
            });
        }

        function checkAccessibilityAchievement() {
            const { font, textSize, theme, distractionFree } = appState.preferences;
            const hasCustomized = font !== 'standard' || textSize !== 'medium' || 
                                theme !== 'light' || distractionFree;
            
            if (hasCustomized && !appState.achievements['accessibility-champion']) {
                unlockAchievement('accessibility-champion');
            }
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
                section.setAttribute('aria-hidden', 'true');
            });

            // Show target section
            const targetSection = document.getElementById(sectionName);
            targetSection.classList.remove('hidden');
            targetSection.setAttribute('aria-hidden', 'false');

            // Update current section
            appState.currentSection = sectionName;

            // Render section content
            switch(sectionName) {
                case 'timeline':
                    renderTimeline();
                    break;
                case 'figures':
                    renderFigures();
                    break;
                case 'stories':
                    renderStories();
                    break;
            }

            // Focus management
            targetSection.focus();
            targetSection.scrollIntoView({ behavior: 'smooth' });
        }

        function handleCardKeydown(event, section) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                showSection(section);
            }
        }

        function renderHomepage() {
            // Homepage is static, just update achievements
            renderAchievements();
            updateProgress();
        }

        function renderTimeline() {
            const container = document.getElementById('timeline-content');
            container.innerHTML = '';

            timelineEvents.forEach((event, index) => {
                const eventElement = document.createElement('div');
                eventElement.className = 'timeline-item';
                eventElement.setAttribute('role', 'listitem');
                eventElement.setAttribute('tabindex', '0');
                eventElement.dataset.category = event.category;
                eventElement.innerHTML = `
                    <div class="timeline-year">${event.year}</div>
                    <div class="timeline-content">
                        <h4>${event.event}</h4>
                        <p>${event.description}</p>
                        <span class="neurotype-badge">${event.category}</span>
                    </div>
                `;

                eventElement.addEventListener('click', () => {
                    appState.progress.timelineEventsViewed.add(event.year);
                    updateProgress();
                    checkTimelineAchievement();
                });

                container.appendChild(eventElement);
            });
        }

        function filterTimeline(category) {
            // Update active filter button
            document.querySelectorAll('.filters .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-filter="${category}"]`).classList.add('active');

            // Filter timeline items
            document.querySelectorAll('.timeline-item').forEach(item => {
                if (category === 'all' || item.dataset.category === category) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function renderFigures() {
            const container = document.getElementById('figures-grid');
            container.innerHTML = '';

            historicalFigures.forEach(figure => {
                const figureElement = document.createElement('div');
                figureElement.className = 'figure-card card';
                figureElement.setAttribute('role', 'listitem');
                figureElement.setAttribute('tabindex', '0');
                figureElement.dataset.field = figure.field;
                figureElement.innerHTML = `
                    <div class="card__body">
                        <div class="figure-avatar">${figure.avatar}</div>
                        <h3>${figure.name}</h3>
                        <div class="neurotype-badge">${figure.neurotype}</div>
                        <p>${figure.era}</p>
                        <p><strong>${figure.field}</strong></p>
                        <p>${figure.description.substring(0, 100)}...</p>
                    </div>
                `;

                figureElement.addEventListener('click', () => openFigureModal(figure));
                figureElement.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        openFigureModal(figure);
                    }
                });

                container.appendChild(figureElement);
            });
        }

        function searchFigures() {
            const searchTerm = document.getElementById('figure-search').value.toLowerCase();
            document.querySelectorAll('.figure-card').forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function filterFigures(field) {
            // Update active filter button
            document.querySelectorAll('#figures .filters .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`#figures [data-filter="${field}"]`).classList.add('active');

            // Filter figure cards
            document.querySelectorAll('.figure-card').forEach(card => {
                if (field === 'all' || card.dataset.field.includes(field)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function openFigureModal(figure) {
            const modal = document.getElementById('figure-modal');
            const modalBody = document.getElementById('modal-body');
            
            modalBody.innerHTML = `
                <div style="text-align: center; margin-bottom: var(--space-24);">
                    <div class="figure-avatar" style="margin: 0 auto var(--space-16);">${figure.avatar}</div>
                    <h2 id="modal-title">${figure.name}</h2>
                    <div class="neurotype-badge">${figure.neurotype}</div>
                    <p><strong>${figure.era} ‚Ä¢ ${figure.field}</strong></p>
                </div>
                
                <div style="margin-bottom: var(--space-24);">
                    <h3>About</h3>
                    <p>${figure.description}</p>
                </div>
                
                <div>
                    <h3>Key Achievements</h3>
                    <ul>
                        ${figure.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
                    </ul>
                </div>
            `;
            
            modal.classList.add('active');
            modal.setAttribute('aria-hidden', 'false');
            document.getElementById('modal-title').focus();
            
            // Track progress
            appState.progress.figuresViewed.add(figure.name);
            updateProgress();
            checkFirstStepsAchievement();
            checkHistoryBuffAchievement();
        }

        function closeFigureModal() {
            const modal = document.getElementById('figure-modal');
            modal.classList.remove('active');
            modal.setAttribute('aria-hidden', 'true');
        }

        function renderStories() {
            const container = document.getElementById('stories-list');
            container.innerHTML = '';

            communityStories.forEach(story => {
                const storyElement = document.createElement('div');
                storyElement.className = 'story-card card';
                storyElement.setAttribute('role', 'listitem');
                storyElement.dataset.category = story.category;
                storyElement.innerHTML = `
                    <div class="card__body">
                        <h3>${story.title}</h3>
                        <div class="story-meta">
                            <span>By ${story.author}</span>
                            ${story.neurotype ? `<span class="neurotype-badge">${story.neurotype}</span>` : ''}
                            <span class="neurotype-badge">${story.category}</span>
                        </div>
                        <p>${story.content}</p>
                    </div>
                `;

                storyElement.addEventListener('click', () => {
                    appState.progress.storiesRead.add(story.title);
                    updateProgress();
                });

                container.appendChild(storyElement);
            });
        }

        function filterStories(category) {
            // Update active filter button
            document.querySelectorAll('#stories .filters .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`#stories [data-filter="${category}"]`).classList.add('active');

            // Filter story cards
            document.querySelectorAll('.story-card').forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function submitStory(event) {
            event.preventDefault();
            
            const title = document.getElementById('story-title').value;
            const author = document.getElementById('story-author').value || 'Anonymous';
            const neurotype = document.getElementById('story-neurotype').value;
            const category = document.getElementById('story-category').value;
            const content = document.getElementById('story-content').value;
            
            const newStory = {
                title,
                author,
                neurotype,
                category,
                content
            };
            
            communityStories.unshift(newStory);
            renderStories();
            
            // Clear form
            document.getElementById('story-form').reset();
            
            // Show success message
            showSuccessMessage('Thank you for sharing your story! üéâ');
            
            // Track progress
            appState.progress.storySubmitted = true;
            updateProgress();
            checkCommunityAchievement();
        }

        function showSuccessMessage(message) {
            const messageElement = document.getElementById('success-message');
            messageElement.textContent = message;
            messageElement.classList.remove('hidden');
            
            setTimeout(() => {
                messageElement.classList.add('hidden');
            }, 4000);
        }

        function renderAchievements() {
            const container = document.getElementById('achievements-preview');
            container.innerHTML = '';

            Object.entries(achievements).forEach(([key, achievement]) => {
                const achievementElement = document.createElement('div');
                const unlocked = appState.achievements[key];
                achievementElement.className = `achievement ${unlocked ? 'unlocked' : 'locked'}`;
                achievementElement.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div>
                        <h4>${achievement.name}</h4>
                        <p>${achievement.description}</p>
                    </div>
                `;
                container.appendChild(achievementElement);
            });
        }

        function unlockAchievement(achievementKey) {
            if (!appState.achievements[achievementKey]) {
                appState.achievements[achievementKey] = true;
                renderAchievements();
                const achievement = achievements[achievementKey];
                showSuccessMessage(`Achievement Unlocked: ${achievement.name} ${achievement.icon}`);
            }
        }

        function updateProgress() {
            const totalActivities = 20; // Arbitrary total for demo
            const completed = appState.progress.figuresViewed.size + 
                            appState.progress.timelineEventsViewed.size + 
                            appState.progress.storiesRead.size + 
                            (appState.progress.storySubmitted ? 5 : 0);
            
            const percentage = Math.min((completed / totalActivities) * 100, 100);
            const progressBar = document.getElementById('overall-progress');
            
            if (progressBar) {
                progressBar.style.width = `${percentage}%`;
                progressBar.parentElement.setAttribute('aria-valuenow', percentage);
            }
        }

        function checkFirstStepsAchievement() {
            if (appState.progress.figuresViewed.size >= 1) {
                unlockAchievement('first-steps');
            }
        }

        function checkTimelineAchievement() {
            if (appState.progress.timelineEventsViewed.size >= 5) {
                unlockAchievement('time-traveler');
            }
        }

        function checkHistoryBuffAchievement() {
            if (appState.progress.figuresViewed.size >= 4) {
                unlockAchievement('history-buff');
            }
        }

        function checkCommunityAchievement() {
            if (appState.progress.storySubmitted) {
                unlockAchievement('community-member');
            }
        }
    </script>
</body>
</html>